## 현실적인 TDD

TDD 방법론을 사용해서 코드를 작성하는 것은 이론적으로는 매우 좋지만 현실적으로는 어려운 점이 많다
그 이유는 프레임워크의 사용법을 명확히 이해하고, 이를 바탕으로 테스트 가능한 구조를 만드는 데 상당한 시간과 노력이 소요되기 때문이다 쉽게 말해 테스트하기 좋은 환경이 구축되지 못했기 때문이다 여기서 말하는 테스트 하기 좋은 환경이란 개발 기간, 프레임워크의 선택, 인프라 구성, 개발자의 테스트 코드 작성 실력등 다양한 것들을 통합해서 말한다 이러한 부분 때문에 실무에서 TDD를 통한 개발에 대한 효율성에 대한 이야기가 지속적으로 나오고 있는 것이다

그럼 실무에서는 어떠한 방법으로 테스트 코드를 작성하여 코드의 안정성을 높여야할까??

현실적인 TDD의 방법은 다음과 같다

### 1. 처음부터 완벽한 TDD 환경을 구축하기보다는 점진적으로 테스트 가능한 구조를 만들어감

처음부터 완벽한 설계와 코드는 없는 것 같이 TDD도 처음부터 완벽하게 적용하는 것이 아닌 상황에 맞춰 점차적으로 테스트 가능한 구조를 만들어 가는 것이다

빠르게 개발을 해야하는 상황에서 TDD를 적용하게 되면 아무래도 테스트 코드의 작성 시간이 많아져 개발 속도가 느려지게 될 것이다 이러한 상황에서 TDD를 완벽하게 적용하기 보단 먼저 개발을 진행하고 추후 테스트 코드를 작성하여 해당 코드의 안정서을 높여가는 방향으로 구조를 변경해가는 것이다

### 2. 핵심 기능부터 우선적으로 테스트 코드를 작성한다

TDD를 진행하게 되면 해당 기능을 구현하기 위해 많은 테스트 코드가 작성이 되게 된다 그렇게 되면 코드의 안정성은 높아지겠지만 많은 양의 테스트 코드를 작성해야 하기 때문에 개발 속도가 느려질 수 있다 이러한 단점을 해결하기 위해 핵심 기능부터 우선적으로 테스트 케이스를 작성하고, 이를 통해 서비스가 점점 더 견고해질 수 있도록 발전시켜 나가는 방식이 효과적인 방법이 될 수 있다 

### 3. TDD 도입을 하지 않더라도 테스트 코드는 작성한다

TDD의 단점 때문에 TDD를 도입하지 않는다고 해서 테스트 코드를 작성하지 않는것이 아닌 테스트 코드를 작성하여 코드의 안정성을 높여야 한다 TDD 방법론 처럼 처음부터 모든 기능의 테스트 코드를 작성하는 것이 아닐지라도 테스트 코드의 작성이 필요한 중요한 기능에는 반드시 테스트 코드를 작성한다 이렇게 되면 코드의 안정성을 높일 뿐만 아니라 코드의 리팩토링이 쉽게 가능하기 때문에 유지보수성이 높아지게 된다

<aside>
모든 기능의 테스트 코드를 작성하는 것이 좋을까??
테스트 코드를 작성하는 것은 좋지만 모든 기능의 테스트 코드를 작성하는 것은 효율이 좋지 못하다
왜냐하면 자주 바뀌는 기능이나 설계가 완벽하지 않은 기능이 있다면 해당 기능에 대한 테스트 코드를 작성했다 하더라도 테스트 코드가 지속적으로 바뀌기 때문에 개발 시간이 2배가 들기 때문이다
그렇기 때문에 핵심 기능이나 오류가 발생할 만한 기능의 테스트 코드를 먼저 작성하고 추후에 필요하다고 판단 될 때 테스트 코드를 작성하는 것이 효율적인 테스트 코드를 작성하는 방법으로 생각된다
</aside>

## 서버 설계의 중요성

서버 설계란 말 그대로 서버와 관련된 시스템이 어떻게 구성되어야 할지를 미리 계획하는 일이다 우리가 흔히 "백엔드 개발"이라고 할 때 단순히 데이터를 주고받는 API만 떠올릴 수 있다 그러나 사실 이 API들이 어떤 구조 위에 올라가야 하고, 어떤 식으로 관리되어야 하는지는 설계 단계에서 결정된다 서버 설계는 기술적인 문제를 넘어서 서비스의 품질과 안정성, 운영 효율성에 깊은 영향을 준다

서버 설계를 한다는 것은 단순히 기술적인 선택을 넘어서서, 전체 시스템이 어떤 방향으로 나아갈지를 결정짓는 중요한 단계이다 그리고 이 설계를 잘 하려면 현재 당면한 문제뿐 아니라 미래에 발생할 수 있는 상황까지 예측하고 대비해야 한다

서버 설계 시 꼭 생각해야 할 핵심 요소들은 다음과 같다

### 1. **성능(Performance)**

사용자가 서비스를 사용할 때 빠르게 반응할 수 있어야 한다 예를 들어, 검색창에 검색어를 입력했을 때 결과가 5초 이상 걸린다면 사용자는 금방 떠나버리게 된다 이런 성능 문제를 방지하기 위해 캐시를 사용하거나, 데이터 처리 방식을 최적화하는 등의 방법이 필요하다

### **2. 확장성(Scalability)**

처음엔 사용자 수가 적어도 나중에 더 많은 사람들이 사용할 수 있다 이럴 때를 대비해서 미리 구조를 잘 짜 두어야 서버를 쉽게 추가 하거나 안정적으로 대응할 수 있다 

### **3. 가용성(Availability)**

서버가 갑자기 꺼지거나 장애가 생겼을 때, 서비스가 멈추지 않고 계속 돌아갈 수 있어야 한다 이를 위해 서버를 이중화하거나 자동으로 복구되는 시스템을 도입하는 것이 중요하다

### **4. 유지보수성(Maintainability)**

개발이 끝이 아니라는 것을 기억해야 한다 시간이 지나면서 새로운 기능을 추가하거나 기존 기능을 수정하는 일이 반복된다 이때 시스템이 잘 정리되어 있지 않으면 하나를 수정할 때 여러 군데가 같이 망가지는 일이 발생하기 때문에 기능별로 코드를 잘 나누고, 명확한 구조를 유지하는 것이 중요하다

### **5. 보안성(Security)**

사용자 정보나 중요한 데이터가 외부로 유출되지 않도록 설계 단계부터 보안을 고려해야 한다 HTTPS 사용, 데이터 암호화, 접근 권한 관리 같은 기본적인 보안 설정이 반드시 포함되어야 한다

### **6. 비용 효율성(Cost Efficiency)**

기술적으로 훌륭한 시스템이라도 유지비용이 너무 많이 들면 운영이 어려워질 수 있다 초기에는 단순한 구조로 시작하되, 향후 트래픽 증가에 대비해 점진적으로 확장할 수 있는 방향으로 설계하는 것이 좋다

이 모든 요소는 서로 영향을 주고받는다 예를 들어 성능을 높이기 위해 캐시를 도입하면, 데이터의 최신성이 떨어질 수도 있으며 보안적으로 관리가 어려워 질 수도 있다 또한 비용을 줄이려고 너무 간단한 구조를 선택하면 나중에 트래픽이 늘었을 때 대응이 어려워질 수 도 있다 이러한 문제를 발생 시키지 않기 위해모든 요소의 균형을 잘 맞추는 것이 중요하다

## 사전 리서치의 중요성

서버를 어떻게 설계할지 고민하기에 앞서 반드시 먼저 진행해야 하는 작업이 있는데 해당 작업이 사전 리서치다
이 단계는 단순히 기술을 고르는 걸 넘어서 만들 서비스가 어떤 기능을 갖춰야 하고 얼마나 많은 사용자를 감당할 수 있어야 하는지 또 어떤 제약이 있는지를 전반적으로 파악하는 과정이다

사전 리서치를 철저히 하면 그만큼 안정적이고 확장 가능한 서버 설계를 할 수 있으며 반대로 이 단계를 대충 넘기면 개발 중간이나 운영 중에 생각지도 못한 문제가 발생할 수 있다

사전 리서치에서 파악해야할 내용은 다음과 같다

### 1. 기능적 요구사항

기능적 요구사항은 말 그대로 "무엇을 할 수 있어야 하는가"를 정의하는 것이다 예를 들어 전자상거래 사이트를 만든다고 하면 아래와 같은 기능들이 있어야 한다

- 상품 목록 조회
- 상품을 장바구니에 담기
- 주문 및 결제
- 사용자의 로그인 및 회원가입

이런 기본 기능들이 무엇인지 미리 목록으로 정리해두면 어떤 API가 필요한지 어떤 데이터베이스 테이블이 필요한지 어떤 화면이 있어야 할지가 점점 명확해진다 또한 사용자 시나리오(예: "손님이 상품을 보고 → 장바구니에 담고 → 결제까지 진행하는 흐름")를 흐름도로 그려보면 더욱 명확해져 개발을 시작할 때 혼란이 적고 설계도 훨씬 자연스럽게 진행된다

### 2. **비기능적 요구사항**

비기능적 요구사항은 어떻게 동작해야 하는가"를 정의하는 것이다 해당 요구사항은 성능, 안정성, 보안 같은 시스템의 품질을 정의하는 기준이다

- **성능**: 특정 요청이 몇 초안에 응답해야 하나? 게시판 글 목록은 몇 개까지 한 번에 보여줄 수 있어야 하나? 이런 기준이 없으면 속도가 느려도 문제인지 아닌지 판단하기 어렵기 때문에 이러한 기준을 미리 정해두어야 함
- **확장성**: 처음엔 하루 사용자 100명일 수 있지만, 다음 달엔 10배가 될 수도 있기 때문에 해당 문제가 발생 했을 때 서버를 어떻게 늘릴 건지, 미리 생각해두는 게 좋음
- **가용성**: 서버가 갑자기 꺼져도 서비스가 중단되면 안 됨 이를 위해 이중화나 백업, 자동 복구 기능 같은 것을 고려

### **3. 트래픽 예측과 규모 추산의 중요성**

서버 설계를 할 때 "얼마나 많은 사람들이 사용할까?"를 예상하는 건 매우 중요하다

- 하루 사용자 수(DAU)는 얼마인지?
- 동시에 접속하는 사람은 몇 명인지?
- 초당 요청(TPS, RPS, QPS)은 얼마나 들어올지?
- 한 달에 얼마나 많은 데이터가 쌓일지?

예를 들어 하루에 1만 명이 쓰는 서비스라면, 피크 시간대에 수백 명이 동시에 접속할 수 있다 이때 서버가 버티지 못하고 느려지거나 멈춘다면 사용자 경험에 큰 타격을 주게 된다 이러한 상황이 발생하지 않게 미리 이런 수치를 추산하고 그에 맞는 서버 수나 캐시 전략을 고려하는 것이 매우 중요하다 물론 100% 정확할 순 없지만 비슷한 서비스의 통계나 경쟁사 사례를 참고하면 충분히 합리적인 예측이 가능하다

### **4. 기술 스택과 현실적인 제약 사항 파악**

개발을 시작하기 전에 어떤 기술을 쓸지도 정해야 한다 

- 데이터를 어떻게 저장할 건지 (MySQL? MongoDB?)
- 실시간 기능이 필요한지 (WebSocket?)
- 인증은 어떻게 할 건지 (JWT? OAuth?)

이런 기술적인 판단을 내리기 위해서는 해당 기술의 장단점도 알아야 하고 해당 기술을 다룰 수 있는지도 파악해야한다 또한 아래와 같이 현실적인 제약도 고려해야 한다

- 예산이 충분한가?
- 팀원 수는 몇 명인가?
- 마감 기한은 언제인가?
- 기존에 구축된 시스템이 있다면 그것과 어떻게 연동할 건가?

예를 들어 쿠버네티스가 좋아 보일 수 있지만 팀에 운영 경험이 없으면 오히려 불안정해질 수 있다 처음에는 단순한 구성으로 시작하고 나중에 필요에 따라 확장하는 게 좋은 전략일 수 있다

### **5. 조사 결과는 문서로 정리**

사전 리서치를 아무리 잘해도 머릿속에만 있으면 소용이 없고 반드시 문서로 정리해서 공유해야 한다

- 요구사항 명세서 (기능 목록, 설명)
- 시스템 개요서 (전체 구조 요약)
- 기술 스택 선택 이유
- 사용자 흐름도

이런 자료는 이후 설계, 개발, 테스트, 운영에 이르기까지 계속 참고하게 되며 팀원 간 의사소통을 도와주고, 빠르게 새로운 팀원이 들어왔을 때도 큰 도움이 된다

또한 문서를 작성할 때 매우 중요한 점은 해당 문서를 다른 동료들이 보고 이해할 수 있는 문서를 만들어야 한다는 것이다 이것을 생각하고 문서를 작성하면 더 좋은 문서를 작성할 수 있을 것이다

### **** 중요!! 설계는 문제를 이해하는 데서 시작!!**

서버 설계는 단순히 "이걸 만들자"로 시작하는 것이 아닌 무엇을, 왜 만들고, 어떤 환경에서 어떻게 동작해야 하는지를 충분히 이해한 뒤에야 제대로 된 설계를 할 수 있다 기능과 트래픽, 기술 제약과 현실 조건들을 미리 파악하고, 문서로 정리해두는 것만으로도 프로젝트의 성공 가능성은 훨씬 높아진다
